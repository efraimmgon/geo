{% extends "base.html" %}

{% load staticfiles %}

{% block title %}Mancha Criminal{% endblock %}

{% block body %}

<style>
	#control {
		cursor: pointer;
	}
</style>

<div class="content">

	<h1>Mancha Criminal</h1>

	<div id="map"></div>
	<div id="appSetings">
		<div id="control"><h3>Configurações Avançadas</h3></div>
		<div id="settings">
			<form id="styleForm" method="post" action="{% url 'analise_criminal:mapAjax' %}">
				{% csrf_token %}
				<table>
					{% if form_styles.errors %}
						<tr><td colspan="2">{{ form_styles.erros }}</td></tr>
					{% endif %}
					<tr><td>{{ form_styles.label_tag }}</td> <td>{{ form_styles }}</td></tr>
				</table>
			</form>
		</div>
	</div>


	<form id="ocorrenciasForm" method="post" action="{% url 'analise_criminal:map' %}">
		{% csrf_token %}
		<table>
		{% for field in form_options %}
			{% if field.errors %}
				<tr><td colspan="2">{{ field.errors }}</td></tr>
			{% endif %}

			<tr><td>{{ field.label_tag }}</td> <td>{{ field }}</td></tr>

		{% endfor %}
		</table>
		<div class='user-info'>
			Os campos marcados com * são obrigatórios. <br />
			Buscas disponíveis de {{ availability.from.data }} a {{ availability.to.data }}.
		</div>

		<br />
		<input type="submit" name="submit" value="Buscar" />
	</form>

	<!-- Síntese do número das ocorrências -->
	<div id="id_info"></div>
	<!-- Tabela com dados das ocorrências -->
	<div id="dados-ocorrencias">
	</div>
	<!-- Falhas; dados não encontrados -->
	<div id="errors"></div>

</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7ekvGGHxVTwTVcpi073GOERnktqvmYz8&libraries=geometry,visualization" type='text/javascript'></script>
<script src="{% static 'js/map/styledMarkers.js' %}"></script>
<script src="{% static 'js/map/oms.js' %}"></script>
<script src="{% static 'js/map/map.js' %}"></script>

{% endblock %}