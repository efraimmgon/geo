{% extends "base.html" %}

{% load staticfiles %}

{% block title %}Análise Criminal{% endblock %}

{% block body %}

<script src="{% static 'js/plotly.min.js' %}"></script>

			<h1>Mapa do Site:</h1>
			<ol>
				<li>Login: <a href="{% url 'accounts:login' %}">
					Autenticação para visualização das páginas do site</a></li>
				<li>Mapa: <a href="{% url 'analise_criminal:map' %}">
					Visualização interarativa e dinâmica
					 de registros criminais</a></li>
				<li>Relatório: <a href="{% url 'analise_criminal:report' %}">
					Análise e comparação de registros criminais
				</a></li>
			</ol>

		{% for key, values in axis.items %}
			<div id="{{ key|slugify }}" style="width:100%; height:500px;"></div>
			<script>
			$(function() {
				TESTER = document.getElementById('{{ key|slugify }}');
				data = [
					{
					{% if key == 'pie' %}
						type: 'pie',
						{% autoescape off %}
						labels: {{ values.labels }},
						values: {{ values.values }},
						{% endautoescape %}
					{% else %}
						type: 'scatter',
						{% autoescape off %}
						x: {{ values.x }},
						y: {{ values.y }},
						{% endautoescape %}
						marker: { color: 'rgb(16,32,77)'},
					{% endif %}
					}
				]
				layout = {
					title: '<b>11º BPM - Sinop</b><br />' +
						'{{ key|capfirst }} - 2015',
					xaxis: { title: 'Mês' },
					yaxis: { title: 'Registros'},
				}

				Plotly.plot(TESTER, data, layout);
			});
			</script>
		{% endfor %} {# axis.values #}

{% endblock %} {# body #}